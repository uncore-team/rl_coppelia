"""Plugin to register 'okok' robot environment.

This module is auto-generated by the GUI. It registers a factory that builds
a VecEnv for the robot using the manager's parameters.
"""

from common.rl_coppelia_manager import RLCoppeliaManager
from stable_baselines3.common.env_util import make_vec_env
from robots.okok.envs import OkokEnv

def _factory(manager: RLCoppeliaManager):
    """Create a VecEnv instance for 'okok'.

    Args:
        manager: The current RLCoppeliaManager instance.

    Returns:
        A vectorized environment (VecEnv) suitable for training/testing.
    """
    return make_vec_env(
        OkokEnv,
        n_envs=1,
        monitor_dir=manager.log_monitor,
        env_kwargs={
            "params_env": manager.params_env,
            "comms_port": manager.free_comms_port,
        },
    )

# Register on module import
RLCoppeliaManager.register_robot("okok", _factory)
